{"version":3,"sources":["firebase.jsx","components/Navbar.jsx","components/Login.jsx","components/Admin.jsx","App.jsx","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","withRouter","props","className","to","exact","firebaseUser","onClick","signOut","then","history","push","React","useState","email","setEmail","pass","setPass","error","setError","esRegistro","setEsRegistro","login","useCallback","a","signInWithEmailAndPassword","res","console","log","user","code","registrar","createUserWithEmailAndPassword","collection","doc","set","uid","onSubmit","e","preventDefault","trim","length","type","placeholder","onChange","target","value","setUser","useEffect","currentUser","App","setFirebaseUser","onAuthStateChanged","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2eb9b17b.chunk.js","sourcesContent":["import app from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAhw4rT0cebl4-5jfxJg9H-kHzAdSflPxQ\",\r\n    authDomain: \"crud-udemy-react-b0ba7.firebaseapp.com\",\r\n    projectId: \"crud-udemy-react-b0ba7\",\r\n    storageBucket: \"crud-udemy-react-b0ba7.appspot.com\",\r\n    messagingSenderId: \"998189994116\",\r\n    appId: \"1:998189994116:web:02b97da356c4f97e5eb2d1\"\r\n};\r\n// Initialize Firebase\r\napp.initializeApp(firebaseConfig);\r\n\r\nconst db = app.firestore();\r\nconst auth = app.auth();\r\n\r\nexport { db, auth }","import React from 'react'\r\nimport { Link, NavLink } from 'react-router-dom'\r\nimport { auth } from \"../firebase\"\r\nimport { withRouter } from \"react-router-dom\"\r\n\r\nconst Navbar = (props) => {\r\n    const cerrarSesion = () => {\r\n        auth.signOut()\r\n            .then(() => {\r\n                props.history.push('/Login')\r\n            })\r\n    }\r\n    return (\r\n        <div className=\"navbar navbar-dark bg-dark\">\r\n            <Link to=\"/\" className=\"navbar-brand\">AUT </Link>\r\n            <div>\r\n                <div className=\"d-flex\">\r\n                    <NavLink\r\n                        className=\"btn btn-dark mr-2\"\r\n                        to=\"/\"\r\n                        exact\r\n                    >\r\n                        Inicio\r\n                    </NavLink>\r\n                    {\r\n                        props.firebaseUser !== null ? (\r\n                            <NavLink\r\n                                className=\"btn btn-dark mr-2\"\r\n                                to=\"/admin\"\r\n                            >\r\n                                Admin\r\n                            </NavLink>\r\n                        ) : null\r\n                    }\r\n                    {\r\n                        props.firebaseUser !== null ? (\r\n                            <button\r\n                                className=\"btn btn-warning\"\r\n                                onClick={() => cerrarSesion()}\r\n                            >\r\n                                Cerrar Sesion\r\n                            </button>\r\n                        ) : (\r\n                                <NavLink\r\n                                    className=\"btn btn-dark\"\r\n                                    to=\"/login\"\r\n                                >\r\n                                    Login\r\n                                </NavLink>\r\n                            )\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Navbar)","import React from 'react'\r\nimport {auth, db} from \"../firebase\"\r\nimport { withRouter } from \"react-router-dom\"\r\n\r\nconst Login = (props) => {\r\n    const [email, setEmail] = React.useState('')\r\n    const [pass, setPass] = React.useState('')\r\n    const [error, setError] = React.useState(null)\r\n    const [esRegistro, setEsRegistro] = React.useState(true)\r\n\r\n    const procesarDatos = (e) => {\r\n        e.preventDefault()\r\n        if (!email.trim()) {\r\n            // console.log('Ingrese Email')\r\n            setError('Ingrese Email')\r\n            return\r\n        }\r\n        if (!pass.trim()) {\r\n            // console.log('Ingrese Password')\r\n            setError('Ingrese Password')\r\n            return\r\n        }\r\n        if (pass.length < 6) {\r\n            // console.log ('Password mayor a 6 caracteres')\r\n            setError('Password de 6 caracteres o mas')\r\n            return\r\n        }\r\n        setError(null)\r\n        console.log('Pasando todas las validaciones')\r\n\r\n        if(esRegistro){\r\n            registrar()\r\n        } else {\r\n            login()\r\n        }\r\n    }\r\n    const login = React.useCallback(async () => {\r\n        try{\r\n            const res =await auth.signInWithEmailAndPassword(email, pass)\r\n            // validar usuarios\r\n            console.log(res.user)\r\n            setEmail('')\r\n            setPass('')\r\n            setError(null)\r\n            props.history.push('/admin')\r\n        }catch (error){\r\n            console.log (error)\r\n            if(error.code === 'auth/invalid-email'){\r\n                setError('Email no valido')\r\n            }\r\n            if(error.code === 'auth/wrong-password'){\r\n                setError('Password incorrecto')\r\n            }\r\n            if(error.code === 'auth/user-not-found'){\r\n                setError('Email no registrado')\r\n            }\r\n        }\r\n    }, [email, pass, props.history])\r\n    const registrar = React.useCallback(async () => {\r\n        try {\r\n            const res = await auth.createUserWithEmailAndPassword(email, pass)\r\n        // crear un usuario\r\n            console.log(res.user)\r\n            db.collection('usuarios').doc(res.user.email).set({\r\n                email: res.user.email,\r\n                uid: res.user.uid\r\n            })\r\n            setEmail('')\r\n            setPass('')\r\n            setError(null)\r\n            props.history.push('/admin')\r\n        } catch (error){\r\n            console.log (error)\r\n            if(error.code === 'auth/invalid-email'){\r\n                setError('Email invalido')\r\n            }\r\n            if (error.code ==='auth/email-already-in-use'){\r\n                setError('Email ya utilizado')\r\n            }\r\n        }\r\n    },[email, pass, props.history])\r\n    return (\r\n        <div className=\"mt-5\">\r\n            <h3 className=\"text-center\">\r\n                {\r\n                    esRegistro ? 'Registro de usuario' : 'Login de acceso'\r\n                }\r\n            </h3>\r\n            <hr />\r\n            <div className=\"row justify-content-center\">\r\n                <div className=\"col-12 col-sm-8 col-md-6 col-xl-4\">\r\n                    <form onSubmit={procesarDatos}>\r\n                        {\r\n                            error && (\r\n                                <div className=\"alert alert-danger\">\r\n                                    {error}\r\n                                </div>\r\n                            )\r\n                        }\r\n                        <input\r\n                            type=\"email\"\r\n                            className=\"form-control mb-2\"\r\n                            placeholder=\"Ingrese un email\"\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            value={email}\r\n                        />\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control mb-2\"\r\n                            placeholder=\"Ingrese un password\"\r\n                            onChange={(e) => setPass(e.target.value)}\r\n                            value={pass}\r\n                        />\r\n                        <button\r\n                            className=\"btn btn-dark btn-lg btn-block\"\r\n                            type=\"submit\"\r\n                        >\r\n                            {\r\n                                esRegistro ? \"Registrarse\" : 'Acceder'\r\n                            }\r\n                        </button>\r\n                        <button\r\n                            className=\"btn btn-info btn-sm btn-block\"\r\n                            onClick={() => setEsRegistro(!esRegistro)}\r\n                            type=\"button\"\r\n                        >\r\n                            {\r\n                                esRegistro ? 'Ya estas registrado' : 'No tienes cuenta'\r\n                            }\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Login)\r\n","import React from 'react'\r\nimport { withRouter } from \"react-router-dom\"\r\nimport {auth} from \"../firebase\"\r\n\r\nconst Admin = (props) => {\r\n\r\n    const [user, setUser] =  React.useState(null)\r\n \r\n    React.useEffect (() => {\r\n        if(auth.currentUser){\r\n            console.log ('Existe usuario')\r\n            setUser(auth.currentUser)\r\n        } else {\r\n            console.log('Usuario no existe')\r\n            props.history.push('/login') \r\n        // Para poder acceder a otra direccion o pagina\r\n        }\r\n    },[props.history])\r\n    return (\r\n        <div className=\"container\">\r\n            <h3>Ruta protegida</h3>\r\n            {\r\n                user && (\r\n                    <h3>{user.email}</h3>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Admin)\r\n// se utiliza para acceder a otra pagina nabvar que esta en app","import React from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport Navbar from './components/Navbar'\nimport Login from './components/Login'\nimport Admin from './components/Admin'\nimport {auth } from './firebase'\n\nfunction App() {\n\n  const [firebaseUser, setFirebaseUser] = React.useState(false)\n  React.useEffect(() => {\n    auth.onAuthStateChanged(user => {\n        console.log(user)\n          if(user){\n              setFirebaseUser(user)\n          }else{\n              setFirebaseUser(null)\n          }\n    })\n}, [])\n  return firebaseUser !== false ? (\n    <Router>\n      <div className=\"container\">\n       <Navbar firebaseUser={firebaseUser} />\n        <Switch>\n          <Route path=\"/login\">\n            <Login />\n          </Route>\n          <Route path=\"/admin\">\n            <Admin />\n          </Route>\n          <Route path=\"/\" exact>\n            inicio...\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  ) : (\n    <p>Loading....</p>\n  )\n} \n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}