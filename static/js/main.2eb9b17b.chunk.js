(this["webpackJsonplogin-udemy"]=this["webpackJsonplogin-udemy"]||[]).push([[0],{34:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(1),c=a.n(s),r=a(27),i=a.n(r),o=(a(34),a(14)),l=a(13),u=a(5),d=a(20);a(44),a(36);d.a.initializeApp({apiKey:"AIzaSyAhw4rT0cebl4-5jfxJg9H-kHzAdSflPxQ",authDomain:"crud-udemy-react-b0ba7.firebaseapp.com",projectId:"crud-udemy-react-b0ba7",storageBucket:"crud-udemy-react-b0ba7.appspot.com",messagingSenderId:"998189994116",appId:"1:998189994116:web:02b97da356c4f97e5eb2d1"});var b=d.a.firestore(),j=d.a.auth(),h=Object(u.f)((function(e){return Object(n.jsxs)("div",{className:"navbar navbar-dark bg-dark",children:[Object(n.jsx)(l.b,{to:"/",className:"navbar-brand",children:"AUT "}),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)(l.c,{className:"btn btn-dark mr-2",to:"/",exact:!0,children:"Inicio"}),null!==e.firebaseUser?Object(n.jsx)(l.c,{className:"btn btn-dark mr-2",to:"/admin",children:"Admin"}):null,null!==e.firebaseUser?Object(n.jsx)("button",{className:"btn btn-warning",onClick:function(){j.signOut().then((function(){e.history.push("/Login")}))},children:"Cerrar Sesion"}):Object(n.jsx)(l.c,{className:"btn btn-dark",to:"/login",children:"Login"})]})})]})})),m=a(18),x=a.n(m),p=a(25),O=Object(u.f)((function(e){var t=c.a.useState(""),a=Object(o.a)(t,2),s=a[0],r=a[1],i=c.a.useState(""),l=Object(o.a)(i,2),u=l[0],d=l[1],h=c.a.useState(null),m=Object(o.a)(h,2),O=m[0],f=m[1],g=c.a.useState(!0),v=Object(o.a)(g,2),y=v[0],k=v[1],w=c.a.useCallback(Object(p.a)(x.a.mark((function t(){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.signInWithEmailAndPassword(s,u);case 3:a=t.sent,console.log(a.user),r(""),d(""),f(null),e.history.push("/admin"),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),"auth/invalid-email"===t.t0.code&&f("Email no valido"),"auth/wrong-password"===t.t0.code&&f("Password incorrecto"),"auth/user-not-found"===t.t0.code&&f("Email no registrado");case 17:case"end":return t.stop()}}),t,null,[[0,11]])}))),[s,u,e.history]),N=c.a.useCallback(Object(p.a)(x.a.mark((function t(){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.createUserWithEmailAndPassword(s,u);case 3:a=t.sent,console.log(a.user),b.collection("usuarios").doc(a.user.email).set({email:a.user.email,uid:a.user.uid}),r(""),d(""),f(null),e.history.push("/admin"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),"auth/invalid-email"===t.t0.code&&f("Email invalido"),"auth/email-already-in-use"===t.t0.code&&f("Email ya utilizado");case 17:case"end":return t.stop()}}),t,null,[[0,12]])}))),[s,u,e.history]);return Object(n.jsxs)("div",{className:"mt-5",children:[Object(n.jsx)("h3",{className:"text-center",children:y?"Registro de usuario":"Login de acceso"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("div",{className:"col-12 col-sm-8 col-md-6 col-xl-4",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.trim()?u.trim()?u.length<6?f("Password de 6 caracteres o mas"):(f(null),console.log("Pasando todas las validaciones"),y?N():w()):f("Ingrese Password"):f("Ingrese Email")},children:[O&&Object(n.jsx)("div",{className:"alert alert-danger",children:O}),Object(n.jsx)("input",{type:"email",className:"form-control mb-2",placeholder:"Ingrese un email",onChange:function(e){return r(e.target.value)},value:s}),Object(n.jsx)("input",{type:"password",className:"form-control mb-2",placeholder:"Ingrese un password",onChange:function(e){return d(e.target.value)},value:u}),Object(n.jsx)("button",{className:"btn btn-dark btn-lg btn-block",type:"submit",children:y?"Registrarse":"Acceder"}),Object(n.jsx)("button",{className:"btn btn-info btn-sm btn-block",onClick:function(){return k(!y)},type:"button",children:y?"Ya estas registrado":"No tienes cuenta"})]})})})]})})),f=Object(u.f)((function(e){var t=c.a.useState(null),a=Object(o.a)(t,2),s=a[0],r=a[1];return c.a.useEffect((function(){j.currentUser?(console.log("Existe usuario"),r(j.currentUser)):(console.log("Usuario no existe"),e.history.push("/login"))}),[e.history]),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h3",{children:"Ruta protegida"}),s&&Object(n.jsx)("h3",{children:s.email})]})}));var g=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),a=t[0],s=t[1];return c.a.useEffect((function(){j.onAuthStateChanged((function(e){console.log(e),s(e||null)}))}),[]),!1!==a?Object(n.jsx)(l.a,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(h,{firebaseUser:a}),Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.a,{path:"/login",children:Object(n.jsx)(O,{})}),Object(n.jsx)(u.a,{path:"/admin",children:Object(n.jsx)(f,{})}),Object(n.jsx)(u.a,{path:"/",exact:!0,children:"inicio..."})]})]})}):Object(n.jsx)("p",{children:"Loading...."})};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.2eb9b17b.chunk.js.map